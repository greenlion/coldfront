#
# Basic RAPID secondary engine tests
#
# Create a table with RAPID secondary engine
CREATE TABLE t1 (a INT) SECONDARY_ENGINE RAPID;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci SECONDARY_ENGINE=RAPID
# Load table into RAPID
INSERT INTO t1 VALUES (1), (2), (3);
ALTER TABLE t1 SECONDARY_LOAD;
# Query the table
SET SESSION secondary_engine_cost_threshold = 0;
SELECT * FROM t1 ORDER BY a;
a
1
2
3
SELECT COUNT(*) FROM t1;
COUNT(*)
3
# Unload from RAPID
ALTER TABLE t1 SECONDARY_UNLOAD;
DROP TABLE t1;
